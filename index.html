<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GIF/Media Viewer</title>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        overflow: hidden;
        background-color: black;
      }

      iframe, img, video {
        position: absolute;
        top: 0;
        left: 0;
        border: none;
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
    </style>
  </head>
  <body>
    <script>
      const params = new URLSearchParams(window.location.search);
      const url = params.get("url");

      if (!url) {
        document.body.innerHTML = "<h3 style='color:white;text-align:center;margin-top:50%;'>URL tidak ditemukan. Tambahkan ?url=...</h3>";
      } else {
        // Coba deteksi tipe konten dari ekstensi
        const lowerUrl = url.toLowerCase();

        if (
          lowerUrl.endsWith(".gif") ||
          lowerUrl.endsWith(".png") ||
          lowerUrl.endsWith(".jpg") ||
          lowerUrl.endsWith(".jpeg") ||
          lowerUrl.endsWith(".webp")
        ) {
          // Jika image/gif
          const img = document.createElement("img");
          img.src = url;
          document.body.appendChild(img);
        } else if (
          lowerUrl.endsWith(".mp4") ||
          lowerUrl.endsWith(".webm") ||
          lowerUrl.endsWith(".mov")
        ) {
          // Jika video
          const video = document.createElement("video");
          video.src = url;
          video.autoplay = true;
          video.loop = true;
          video.muted = true; // Muted control diset ke false
          video.playsInline = true;
          video.controls = false; // Menambahkan kontrol video
          video.setAttribute('allowfullscreen', ''); // Mengizinkan fullscreen
          document.body.appendChild(video);
        } else {
          // Default gunakan iframe (bisa Google Drive preview, dll)
          const iframe = document.createElement("iframe");
          iframe.src = url;
          iframe.allow = "autoplay; fullscreen; encrypted-media"; // Menambahkan encrypted-media
          iframe.setAttribute('allowfullscreen', ''); // Mengizinkan fullscreen
          document.body.appendChild(iframe);
        }
      }
    </script>
  </body>
</html>
